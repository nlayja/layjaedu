<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Super Maestra - Juego</title>
<style>
body {
  margin: 0;
  background: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: sans-serif;
}

#contador {
  margin: 10px;
  font-size: 24px;
  color: white;
}

#juego {
  position: relative;
  width: 100%;
  max-width: 960px;
  aspect-ratio: 8 / 3;
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(3, 1fr);
  border: 5px solid #333;
  background: #111;
}

.celda {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 50px;
}

#pacman {
  position: absolute;
  z-index: 10;
  pointer-events: none;
  width: 100px;
  height: 100px;
  transition: left 0.1s, top 0.1s;
}

#barra-progreso {
  width: 100%;
  max-width: 960px;
  height: 20px;
  background: #333;
  border-radius: 12px;
  margin-top: 10px;
  border: 2px solid white;
}

#relleno {
  height: 100%;
  width: 100%;
  background: gold;
  border-radius: 12px;
  transition: width 0.3s;
}

#cartel-victoria {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 30px;
  border-radius: 30px;
  text-align: center;
  display: none;
}
</style>
</head>
<body>

<div id="contador">ğŸª 0 ğŸ‚ 0 ğŸ¬ 0</div>
<div id="juego"></div>
<div id="barra-progreso"><div id="relleno"></div></div>

<div id="cartel-victoria">
  <h1>ğŸ‰ Â¡LO LOGRASTE! ğŸ‰</h1>
</div>

<script>
const juego = document.getElementById('juego');
const relleno = document.getElementById('relleno');
const contador = document.getElementById('contador');
const cartel = document.getElementById('cartel-victoria');

let pacX=0, pacY=0;
const filas=3, columnas=8;

const laberinto=[];
let totalComida=0;
const tiposComida=['ğŸª','ğŸ‚','ğŸ¬'];
const conteoComido={'ğŸª':0,'ğŸ‚':0,'ğŸ¬':0};

// Tablero
for(let y=0;y<filas;y++){
  laberinto[y]=[];
  for(let x=0;x<columnas;x++){
    const celda=document.createElement('div');
    celda.classList.add('celda');
    juego.appendChild(celda);

    if(x===0 && y===0){ laberinto[y][x]=0; celda.innerHTML=''; }
    else{
      const comida=tiposComida[Math.floor(Math.random()*tiposComida.length)];
      celda.innerHTML=comida;
      celda.classList.add('comida');
      laberinto[y][x]=comida;
      totalComida++;
    }
  }
}

// Crear super maestra
const pacman=document.createElement('img');
pacman.id='pacman';
// -----------------------------
// AQUI PON TU IMAGEN DE MAESTRA CON CAPA
pacman.src='https://raw.githubusercontent.com/nlayja/layjaedu/main/perfil40derecha.jpg';
pacman.alt='Super Maestra';
juego.appendChild(pacman);

function actualizarPacman(){
  const cellWidth=juego.clientWidth/columnas;
  const cellHeight=juego.clientHeight/filas;
  pacman.style.left=(pacX*cellWidth)+'px';
  pacman.style.top=(pacY*cellHeight)+'px';
}

function actualizarContador(){
  contador.textContent=`ğŸª ${conteoComido['ğŸª']} ğŸ‚ ${conteoComido['ğŸ‚']} ğŸ¬ ${conteoComido['ğŸ¬']}`;
}

function actualizarBarra(){
  const restantes=document.querySelectorAll('.comida').length;
  relleno.style.width=((restantes/totalComida)*100)+'%';
  if(restantes===0){ cartel.style.display='block'; }
}

// Movimiento
function moverPacman(key){
  let nx=pacX, ny=pacY;
  let dir='';

  if(key==='ArrowRight'){ nx++; dir='right'; }
  if(key==='ArrowLeft'){ nx--; dir='left'; }
  if(key==='ArrowUp'){ ny--; dir='up'; }
  if(key==='ArrowDown'){ ny++; dir='down'; }

  if(nx>=0 && nx<columnas && ny>=0 && ny<filas){
    pacX=nx; pacY=ny;

    // Cambiar imagen segun direcciÃ³n
    if(dir==='right') pacman.src='https://raw.githubusercontent.com/nlayja/layjaedu/main/perfil40derecha.jpg';
    if(dir==='left') pacman.src='https://raw.githubusercontent.com/nlayja/layjaedu/main/perfil40izquierda.jpg';
    if(dir==='up') pacman.src='https://raw.githubusercontent.com/nlayja/layjaedu/main/perfil40espaldas.jpg';
    if(dir==='down') pacman.src='https://raw.githubusercontent.com/nlayja/layjaedu/main/perfil40agacha.jpg';

    actualizarPacman();

    if(laberinto[ny][nx]!==0){
      const tipo=laberinto[ny][nx];
      laberinto[ny][nx]=0;
      const index=ny*columnas+nx;
      const celda=juego.children[index];
      celda.innerHTML='';
      celda.classList.remove('comida');
      conteoComido[tipo]++;
      actualizarContador();
      actualizarBarra();
    }
  }
}

// Controles teclado
window.addEventListener('keydown', e=> moverPacman(e.key));

// Controles tÃ¡ctiles
let touchStartX=0, touchStartY=0;
window.addEventListener('touchstart', e=>{
  touchStartX=e.touches[0].clientX;
  touchStartY=e.touches[0].clientY;
},{passive:true});

window.addEventListener('touchend', e=>{
  const dx=e.changedTouches[0].clientX-touchStartX;
  const dy=e.changedTouches[0].clientY-touchStartY;

  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>0) moverPacman('ArrowRight');
    else moverPacman('ArrowLeft');
  } else {
    if(dy>0) moverPacman('ArrowDown');
    else moverPacman('ArrowUp');
  }
},{passive:true});
</script>
</body>
</html>
